{"mappings":"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","sources":["public/js/index.js","public/js/mapbox.js","public/js/login.js","public/js/alert.js","public/js/updateSettings.js","public/js/checkoutBooking.js"],"sourcesContent":["/* import '@babel/polyfill';  */\r\nimport { displayMap } from \"./mapbox\";\r\nimport {loginUser ,logoutUser} from \"./login\"\r\nimport {updateMyData} from \"./updateSettings\"\r\nimport {checkout} from './checkoutBooking'\r\n\r\n\r\n\r\n\r\n\r\nconst map =document.getElementById('map');\r\nif(map){\r\n    const loactions =JSON.parse(map.dataset.locations);\r\n    displayMap(loactions);\r\n}\r\n\r\nconst logginForm = document.querySelector('.login--form');\r\nif(logginForm){\r\n    logginForm.addEventListener('submit' ,(e)=>{\r\n        e.preventDefault();\r\n        const email =document.getElementById('email').value;\r\n        const password =document.getElementById('password').value;\r\n        loginUser('signin' ,{email  ,password});\r\n    })\r\n}\r\n\r\nconst signupForm =document.querySelector('.signup--form');\r\nif(signupForm){\r\n    signupForm.addEventListener('submit' ,(e)=>{\r\n        e.preventDefault();\r\n        const name =document.getElementById('name').value;\r\n        const email =document.getElementById('email').value;\r\n        const password =document.getElementById('password').value;\r\n        const passwordConfirm =document.getElementById('passwordConfirm').value;\r\n        loginUser('signup',{name ,email ,password ,passwordConfirm}) ;\r\n    })\r\n\r\n}\r\n\r\nconst logoutBtn =document.querySelector('.nav__el--logout');\r\nif(logoutBtn){\r\n    logoutBtn.addEventListener('click',logoutUser);\r\n}\r\n\r\nconst userDataForm =document.querySelector('.form-user-data');\r\nif(userDataForm){\r\n    userDataForm.addEventListener('submit',async (e)=>{\r\n        e.preventDefault();\r\n        const form = new FormData();\r\n        form.append('name' ,document.getElementById('name').value);\r\n        form.append('email' ,document.getElementById('email').value);\r\n        form.append('photo' ,document.getElementById('photo').files[0]);\r\n        await updateMyData('data' ,form);\r\n    });\r\n}\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nif(userPasswordForm){\r\n    userPasswordForm.addEventListener('submit',async(e)=>{\r\n        e.preventDefault();\r\n        const currentPassword =document.getElementById('password-current').value;\r\n        const password =document.getElementById('password').value;\r\n        const passwordConfirm =document.getElementById('password-confirm').value;\r\n        const saveBtn =document.querySelector('.save-btn');\r\n\r\n        saveBtn.innerText ='Updating...';\r\n\r\n        await updateMyData('password',{currentPassword ,password ,passwordConfirm});\r\n\r\n        saveBtn.innerText ='Save password';\r\n\r\n        document.getElementById('password-current').value=\"\";\r\n        document.getElementById('password').value =\"\";\r\n        document.getElementById('password-confirm').value =\"\";\r\n    })\r\n}\r\n\r\nconst bookBtn =document.getElementById('bookingBtn');\r\nif(bookBtn){\r\n    bookBtn.addEventListener('click' ,(e)=>{\r\n        e.target.textContent = 'Processing...';\r\n        const {tourPrice ,tourItem} = e.target.dataset;\r\n        checkout(tourPrice ,tourItem);\r\n       /*  e.target.textContent = 'Book Tour Now !'; */\r\n    })\r\n\r\n}","\r\n\r\nexport const displayMap= (loactions)=>{\r\nvar map = L.map('map' ,\r\n{   zoomControl :false \r\n    ,scrollWheelZoom :false\r\n    ,dragging:false , \r\n    doubleClickZoom:false ,\r\n    touchZoom:false ,\r\n    });\r\nL.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    maxZoom: 19,\r\n    attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n}).addTo(map);\r\n\r\nlet points =[];\r\nArray.from(loactions).forEach(loc => {\r\n    points.push([loc.coordinates[1] ,loc.coordinates[0]]);\r\n    L.marker([loc.coordinates[1] ,loc.coordinates[0]]).addTo(map);\r\n});\r\n\r\nconst bounds = L.latLngBounds(points).pad(0.5);\r\nmap.fitBounds(bounds);\r\nmap.scrollWheelZoom.disable();\r\n}","/* import axios from \"axios\"; */\r\n\r\nimport {showAlert} from './alert';\r\n\r\nexport const loginUser=async (type ,data) =>{\r\n    try{  \r\n        const res = await axios({\r\n                method:'POST' ,\r\n                url: type==='signin' ? 'http://localhost:5000/api/v1/users/singin' :'http://localhost:5000/api/v1/users/signup',\r\n                data\r\n        }) \r\n        if (res.data.status === 'success') {\r\n            showAlert('success', `${type.toUpperCase()} successfully!`);\r\n            window.setTimeout(() => {\r\n                location.assign('/');\r\n            }, 1000);\r\n        }\r\n    }\r\n    catch(err){\r\n        console.log(err);\r\n        showAlert('error', err.response.data.message);\r\n    }\r\n\r\n}\r\n\r\nexport const logoutUser = async ()=>{\r\n    try{\r\n        const res = await axios({\r\n            method :'GET' ,\r\n            url :'http://localhost:5000/api/v1/users/logout'\r\n        })\r\n        if (res.data.status === 'success') {\r\n            showAlert('success', 'Logged out successfully!');\r\n            window.setTimeout(() => {\r\n                location.reload(true);\r\n                location.assign('/');\r\n            }, 1000);\r\n        }\r\n    }\r\n    catch(err){\r\n        console.log(err);\r\n        showAlert('error', err.response.data.message);   \r\n    }\r\n    \r\n\r\n}\r\n\r\n\r\n\r\n","\r\nexport const hideAlert = () => {\r\n    const el = document.querySelector('.alert');\r\n    if (el) el.parentElement.removeChild(el);\r\n  };\r\n  \r\n\r\nexport const showAlert =(type , msg)=>{\r\n  console.log(msg)\r\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n    window.setTimeout(hideAlert, 5000);\r\n\r\n}","/* import axios from \"axios\" */\r\nimport {showAlert} from './alert';\r\n\r\n\r\n\r\n\r\nexport const updateMyData = async (type , data)=>{\r\n    try{\r\n        const res =await axios({\r\n            url :type ==='password' ? 'http://localhost:5000/api/v1/users/updatePassword' :'http://localhost:5000/api/v1/users/updateMe',\r\n            method:'PATCH' ,\r\n            data \r\n        })\r\n        console.log(res);\r\n        if(res.data.status ==='success'){\r\n            showAlert('success',`${type.toUpperCase()} updated successfully`);\r\n            window.setTimeout(() => {\r\n                location.reload(true);\r\n            }, 1000);\r\n        }\r\n    }catch(err){\r\n            showAlert('error',err.response.data.message);\r\n    }\r\n}","export const checkout=async (price ,items) =>{\r\n    try{  \r\n        const res = await axios({\r\n                method:'POST' ,\r\n                url:'http://localhost:5000/api/v1/bookings/checkout' ,\r\n                data:{price , items}\r\n        }) \r\n        /* console.log(res.data); */\r\n        if (res.data.status === 'success') {\r\n            window.setTimeout(() => {\r\n                location.assign(res.data.link);\r\n            }, 1000);\r\n        }\r\n    }\r\n    catch(err){\r\n        console.log(err.response.data.message);\r\n    }\r\n\r\n}"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}